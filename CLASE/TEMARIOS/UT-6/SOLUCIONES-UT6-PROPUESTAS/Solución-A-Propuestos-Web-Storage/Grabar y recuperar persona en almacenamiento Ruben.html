<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<script type="text/javascript">
		function Cliente(nombre,apellidos,movil,provincia)
		{
			this.nombre=nombre;
			this.apellidos=apellidos;
			this.movil=movil;
			this.provincia=provincia;
		}


		function guardar()
		{
			var cliente=new Cliente(nombre.value,apellidos.value,movil.value,provincia.value);
			window.sessionStorage.setItem(cliente.movil,JSON.stringify(cliente));

			//alert(window.sessionStorage.getItem(cliente.movil));
		}

		function recuperar()
		{
			var clave=movil.value;
			var cliente=JSON.parse(window.sessionStorage.getItem(clave));
			if(cliente==null)
			{
				alert("La persona no existe");
			}
			else
			{
				nombre.value=cliente.nombre;
				apellidos.value=cliente.apellidos;
				movil.value=cliente.movil;
				provincia.value=cliente.provincia
				alert("Persona recuperada");
			}

		}

		function borrarSesion()
		{
			window.sessionStorage.clear();
			alert("Datos de sesion borrados");
		}

		function reset()
		{
			nombre.value="";
			apellidos.value="";
			movil.value="";
			provincia.value="";
		}


		function iniciar()
		{
			if(document.readyState=="complete")
			{
				var nombre=document.getElementById("nombre");
				var apellidos=document.getElementById("apellidos");
				var movil=document.getElementById("movil");
				var provincia=document.getElementById("provincia");

				document.getElementById("guardar").addEventListener("click",guardar,false);
				document.getElementById("recuperar").addEventListener("click",recuperar,false);
				document.getElementById("borrarSesion").addEventListener("click",borrarSesion,false);
				document.getElementById("reset").addEventListener("click",reset,false);
			}
		}
		document.addEventListener("readystatechange",iniciar,false);
	</script>
</head>
<body>
	Nombre:
	<input type="text" name="nombre" id="nombre">
	<br>
	Apellidos:
	<input type="text" name="apellidos" id="apellidos">
	<br>
	Movil:
	<input type="text" name="movil" id="movil">
	<br>
	Provincia:
	<input type="text" name="provincia" id="provincia">
	<br>
	<button id="guardar">Guardar</button>
	<button id="recuperar">Recuperar</button>
	<button id="borrarSesion">Borrar datos de sesion</button>
	<button id="reset">Borrar campos</button>

</body>
</html>