<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Objeto History</title>
</head>
<body>
    <button id="atras">Atrás</button>
    <button id="go">Ir a ...</button>
    <button id="adelante">Avanzar</button>
    <button id="home">Home</button>
    <button id="productos">Productos</button>
    <button id="contacto">Contacto</button>
    <button id="contacto2">Contacto 2</button>
    <script>
        const atras=document.getElementById("atras");
        const go=document.getElementById("go");
        const adelante=document.getElementById("adelante");

        const home=document.getElementById("home");
        const productos=document.getElementById("productos");
        const contacto=document.getElementById("contacto");
        const contacto2=document.getElementById("contacto2");
        
        atras.addEventListener('click', e=>{
            history.back();
        });
        go.addEventListener('click', e=>{
            const irse=parseInt(prompt('Introduzca el índice de la página que desea visitar',2));
            history.go(irse);
        });

        adelante.addEventListener('click', e=>{
            history.forward();
        })
        
        home.addEventListener('click', e=>{
            history.pushState(null, 'Home', '/home');
        })
        /*
        home.addEventListener('click', e=>{
            history.pushState({
                page: 'Home'
            }, 'Home', '/home');
        })
        */
       productos.addEventListener('click', e=>{
            history.pushState(null, 'Productos', '/productos');
        })
        /*
        productos.addEventListener('click', e=>{
            history.pushState({
                page: 'productos',
                productos: [
                    { nombre: 'X', precio: '60'},     
                    
                    { nombre: 'B', precio: '120'}
                ]
            }, 'Productos', '/productos');
        })
        */
        contacto.addEventListener('click', e=>{
            history.pushState(null, 'Contacto', '/contacto');
        })

        /*
        contacto.addEventListener('click', e=>{
            history.pushState({
                page: 'contacto'
            }, 'Contacto', '/contacto');
        })
        contacto2.addEventListener('click', e=>{
            history.replaceState({
                page:contacto,
                usuario:{
                    nombre: 'Leyenda',
                }
            //}, 'Contacto', /contacto2);
            },'Contacto','/contacto2/usuario/datos');
        })*/
        
        //popstate: evento que se produce al presionar uno de los botones "atrás", "adelante" e "ir a ..."
        //popstate equivaldría a extraer del historial la URL correspondiente para avanzar o retroceder.
        //popstate NO SE PRODUCE al ejecutarse el pushstate o replacestate.

        window.addEventListener('popstate', e=>{
            console.log("POPSTATE: " + history.state)
        })

        
    </script>
</body>
</html>